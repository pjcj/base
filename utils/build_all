#!/bin/sh

# set -x

gobase() { cd ~/g/base || exit 1; }

gobase

~/.tmux/plugins/tpm/bindings/clean_plugins
~/.tmux/plugins/tpm/bindings/install_plugins
~/.tmux/plugins/tpm/scripts/update_plugin_prompt_handler.sh all

$EDITOR -c PlugUpgrade -c qa
$EDITOR -c PlugClean   -c qa
$EDITOR -c PlugInstall -c qa
$EDITOR -c PlugUpdate  -c qa

gobase
pip install --upgrade --user git+git://github.com/powerline/powerline
pip3 install --upgrade --user vim-vint

# for neovim:
sudo aptitude install python3-pip
sudo pip2 install --upgrade neovim
sudo pip3 install --upgrade neovim

gobase
golang get -u github.com/motemen/ghq
ghq import -u < ghq.repos

while read -r repo; do
    sw=$(basename "$repo")
    dir=$(ghq list -p | grep "$sw")
    # echo $repo, $sw, $dir
    # cd "$dir" || exit 1
    cd "$dir"
    echo building "$sw"
    build
done < ghq.repos
